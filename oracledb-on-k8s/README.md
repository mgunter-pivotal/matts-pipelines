oracledb-on-k8s
=================
#### This helm chart helps you deploy an Oracle Database 12c Enterprise Edition, Single instance on Oracle Container Engine.

The Oracle Database container is configured to use a Persistent Volume created via a Persistent Volume Claim using oci provider, this will allocate a block volume in Oracle Cloud Infrastructure tenancy.

#### Pre-Requisites
Before running the chart, create a namespace and a registry secret to hold the docker credentials needed to download the Oracle Database Docker image from Docker Store.  
Please note that you need to accept the License Agreement with your accounte on Docker Store before being able to download the image.

Create a namespace (if you don't want to use the *default* one)
> kubectl create namespace [NAME]

Create a docker secret in the above namespace
> kubectl create secret docker-registry regsecret --docker-username=[user] --docker-password=[password] --docker-email=[email]

To install this helm chart, clone or download the repository
> git clone https://github.com/paolobellardone/oracledb-on-k8s.git

then customize the *values.yaml* to setup the required variables and run the following command
> helm install --name [release name] oracledb

The command will print out all the informations needed to access your new Oracle Database instance on K8S.  
The Oracle Database instance will be available after a little while because at first run the database needs to be created and instantiated.

##### Values.yaml editable defaults, please change according to your needs

| Block   | Variable         | Default value                    | Notes |
|---------|------------------|----------------------------------|-------|
|         | registrySecret   | regsecret                        | See above on how to create it |
|         | namespace        | default                          | See above on how to create a namespace |
| pvc     |                  |                                  ||
|         | ociAD            |                                  | Select an Availability Domain in your tenancy |
|         | storageSize      | 50Gi                             | This is the minimum size on OCI |
| service |                  |                                  ||
|         | type             | LoadBalancer                     | This can be ClusterIP, NodePort or LoadBalancer |
|         | port             | 1521                             ||
|image    |                  |                                  ||
|         | repository       | store/oracle/database-enterprise ||
|         | tag              | 12.2.0.1                         | 12.2.0.1 or 12.2.0.1-slim |
|         | pullPolicy       | IfNotPresent                     | This can be IfNotPresent or Always |
|         | containerMemory  | 3Gi                              | Requested memory for Oracle Database Container |
|         | hostPort         | 1521                             | SQLNet Port on node |
|         | containerPort    | 1521                             | SQLNet Port on container |
|         | dbSid            | ORCL                             | Oracle SID for Container database |
|         | dbPdb            | PDB1                             | Oracle PDB for Pluggable database |
|         | dbPassword       |                                  | Default password for SYS ,if not specified will be autogenerated and print in the setup log |
|         | dbDomain         | local                            ||
|         | dbMemory         | 2Gi                              | Memory allocated for Oracle Database |
